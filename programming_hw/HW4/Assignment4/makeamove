#!/usr/bin/tcsh
cat beforemove | sed -n 's/\(.\)\(.\)\(.\)/\1 \2 \3/g ; 1,2 G;p' | sed "N;N;N;N; s,[^ OX\n],$1,$2; s/\([OX]\) \1 \1/\1-\1-\1/; s,\([OX]\)\( . .\)[\n][\n]\(\1 . .\)[\n][\n]\(\1 . .\),\1\2\n|\n\3\n|\n\4,g; s,\(. \)\([OX]\)\( .\)[\n][\n]\(. \2 .\)[\n][\n]\(. \2 .\),\1\2\3\n  |\n\4\n  |\n\5,g ; s,\(.*\)\([OX]\)\n\n\(.*\)\2\n\n\(.* .* \)\2,\1\2\n    |\n\3\2\n    |\n\4\2,; s,\([OX]\)\( . .\)[\n][\n]\(. \1 .\)[\n][\n]\(. . \1\),\1\2\n \\\n\3\n   \\\n\4,g; s,\(.*\)\([OX]\)\n\n\(.*\) \2 \(.*\)\n\n\2\(.*\),\1\2\n   /\n\3 \2 \4\n /\n\2\5," > aftermove
cat aftermove | tr -cd "[a-iOX]" | sed 's/\(.\)\(.\)\(.\)/\1\2\3\n/g' > beforemove
grep -o "[^ a-iOoXx]" aftermove > /dev/null && exit 0 || exit 1
